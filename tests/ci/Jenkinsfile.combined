pipeline {
  agent none 
  stages {
    stage('Determine HPC Platform') {
       agent {
        label 'built-in'   
       }
      steps {
        script {
               matchedNode = []
               for (label in pullRequest.labels) {
                   listOfLabelNodeNames = jenkins.model.Jenkins.instance.nodes.collect {
                   node -> node.getLabelString().contains(label) ? node.name : null
                   //println("The value of label is "+label+" the value of node is "+node.name)
                   if (node.name.toLowerCase().contains(label)) {
                      matchedNode += node.name
                   }
                 }

               }
               return matchedNode
         }
       }
      }    
    }
 } 
